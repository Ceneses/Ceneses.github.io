---
layout:     post
title:      QT学习总结
subtitle:   QT学习总结
date:       2017-09-03
author:     HCY|恒成立
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - QT
    - 学习总结
---
# 控件使用
> QPushButton

|QPushButton使用方法         |解释                                                                          |
|:--------------------------|------------------------------------------------------------------------------|
|isDown()                   |表示按钮button是否是pressed down按下的                                          |
|isChecked()                |表示按钮是否被检查或者标记切换的                                                 |
|isEnabled()                |表示按钮是否可以被用户点按                                                       |
|setAutoRepeat()            |设置按钮是否当用户长按按钮可以auto-repeat(自动重复执行)                           |            
|pressed()                  |当鼠标在button上并点击左键的时候发射                                             |
|released()                 |当鼠标左键被释放的时候                                                           |
|clicked(bool checked=false)|当鼠标首先按下pressed，然后释放，或者快捷键被触发，或者click()或者animateClick()调用|
|toggled()                  |当可切换（标记）按钮状态改变时发射信号                                            |
|autoExclusive:bool         |标志自动互斥是否激活enabled                                                     |
|text                       |QString 属性保存按钮上显示的问题                                                 |

> QTextEdit

|QTextEdit使用方法                                                                                        |
|:-------------------------------------------------------------------------------------------------------|
|向QTextEdit中当前光标位置添加一行字符串message                                                             |
|ui->textedit->textCursor().insertText(QStringLiteral("加入的message"+"\n"));                             |
|向QTextEdit中末尾追加一行字符串message                                                                    |
|ui->textedit->append(QStringLiteral("加入的message"+"\n"));                                              |
|获取textedit中的内容                                                                                      |
|ui->textedit->toPlainText()                                                                              |
|将光标移至末尾                                                                                            |
|ui->textedit->moveCursor(QTextCursor::End)                                                               |
|复制/剪切/粘贴/撤销                                                                                       |
|ui->textEdit->copy()/cut()/paste()/undo()                                                                |
|清除文档内容                                                                                              |
|ui->textEdit->clear()                                                                                    |
|让textedit区域可见                                                                                        |
|ui->setVisible(true)                                                                                     |
|textEdit的内容被修改                                                                                      |
|ui->textEdit->document()->ismodified()                                                                   |

> QMessageBox

```
消息对话框类型
QMessageBox::warning
QMessageBox::about
QMessageBox::aboutQt
QMessageBox::information
```

```
以上用法如下
QMessageBox::warning(this, QStringLiteral("多文档编辑器"),
                   QStringLiteral("无法写入文件 %1：/n %2").arg(fileName).arg(file.errorString()));
添加按钮
QpushButton* mybutton=QMessageBox::messagebox.addButton(QStringLiteral("保存修改内容，并且新建文档"),QMessageBox::YesRole);
接受响应判断
QMessageBox::messagebox.exec()==QMessageBox::AcceptRole
QMessageBox::messagebox.clickedButton()==QPushButton::button_name
```
# 新建文件

```
1.判断文件是否保存或修改
2.若已经保存且无修改，则进行一下步骤:
1)将标题设为未命名状态
2)将textEdit文档区域清空
3)将textEdit文档区域设为可见(防止出现看不见的意外)
代码：
if (maybeSave()) 
{
   isUntitled = true;
   curFile = QStringLiteral("未命名.txt");
   setWindowTitle(curFile);
   ui->textEdit->clear();
   ui->textEdit->setVisible(true);
}
```

# 保存文件

```
当前文件为QFile myfile(filename)--->再将输出流的输出端口QTextStream out(&myfile)和我的myfile进行绑定--->把textedit的内容从out端口流出
```

* 代码

```
bool MainWindow::save()
{
   if (isUntitled) {
       return saveAs();
   } else {
       return saveFile(curFile);
   }
}
bool MainWindow::saveAs()
{
   QString fileName = QFileDialog::getSaveFileName(this,QStringLiteral("另存为"),curFile);//QString curfile 
   if (fileName.isEmpty())
       return false;
   return saveFile(fileName);
}
bool MainWindow::saveFile(const QString &fileName)
{
   QFile file(fileName);

   if (!file.open(QFile::WriteOnly | QFile::Text)) {

       // %1和%2分别对应后面arg两个参数，/n起换行的作用
       QMessageBox::warning(this, QStringLiteral("多文档编辑器"),
                   QStringLiteral("无法写入文件 %1：/n %2")
                  .arg(fileName).arg(file.errorString()));
       return false;
   }
   QTextStream out(&file);
   // 鼠标指针变为等待状态
   QApplication::setOverrideCursor(Qt::WaitCursor);
   out << ui->textEdit->toPlainText();
   // 鼠标指针恢复原来的状态
   QApplication::restoreOverrideCursor();
   isUntitled = false;
   // 获得文件的标准路径
   curFile = QFileInfo(fileName).canonicalFilePath();
   setWindowTitle(curFile);
   return true;
}
/************************************************************************************************/
//void savefile(const QString & filename)
//{
//    QFile myfile(filename);
//    QTextStream out(&myfile);
//    out<<ui->textedit->toPlainText();
//}
/************************************************************************************************/
```
